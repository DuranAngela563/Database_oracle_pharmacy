CREATE TABLE Pharmacy(
Code INT NOT NULL,
PName VARCHAR2(30) NOT NULL,
Address VARCHAR2(30),
Phone_Code INT,
Email VARCHAR2(30),
Schedule_Code INT NOT NULL,
Catalogue_Code INT NOT NULL,
PRIMARY KEY (Code),
UNIQUE (Name)
);

CREATE TABLE Phone(
PharmacyCode INT NOT NULL,
Number INT NOT NULL,
PRIMARY KEY (PharmacyCode, Number)
);

CREATE TABLE Employee(
DNI CHAR(9) NOT NULL,
EName VARCHAR2(20) NOT NULL,
LastName VARCHAR2(20) NOT NULL,
Birthdate DATE,
Ssn VARCHAR(9) NOT NULL , 
Shift_Code INT NOT NULL,
Super_Ssn VARCHAR2(9) NOT NULL,
Pharmacy_Code INT NOT NULL,
PRIMARY KEY (Ssn)
);

CREATE TABLE Shift(
Code INT NOT NULL,
SName VARCHAR2(10) NOT NULL,
Start NUMBER NOT NULL,
End NUMBER NOT NULL,
PRIMARY KEY (Code)
);

CREATE TABLE Schedule(
Code INT NOT NULL,
ScName VARCHAR2(20) NOT NULL,
Start NUMBER NOT NULL,
End NUMBER NOT NULL,
PRIMARY KEY (Code),
);

CREATE TABLE Medicine(
Code INT NOT NULL, 
Lab_Name VARCHAR2(20) NOT NULL,
Commercial_brand VARCHAR2(20) NOT NULL,
Type_Excipient VARCHAR2(10) NOT NULL,
Unit_Version NUMBER NOT NULL,
Type_Admin_Code INT NOT NULL,
PRIMARY KEY (Code)
); 

CREATE TABLE Type_Administration(
Code INT,
Name VARCHAR2(20) NOT NULL,
Format VARCHAR(10) NOT NULL,
PRIMARY KEY (Code)
);


CREATE TABLE Type_Excipient(
TeName VARCHAR2(20) NOT NULL, 
Format VARCHAR2(10) NOT NULL,
PRIMARY KEY(Name) 
);

CREATE TABLE Laboratory(
LName VARCHAR2(20) NOT NULL,
Phone_Code INT NOT NULL
Address VARCHAR2(30) NOT NULL,
Webpage VARCHAR2(30) NOT NULL,
PRIMARY KEY (LName)
);


ALTER TABLE Pharmacy ADD CONSTRAINT FK0_Pharmacy FOREIGN KEY(Schedule_Code) REFERENCES Schedule (Code);
--ALTER TABLE Phone ADD CONSTRAINT FK0_Phone FOREIGN KEY (Pharmacy_Code) REFERENCES Pharmacy (Code) ON DELETE CASCADE;

ALTER TABLE Employee ADD CONSTRAINT FK0_Employee FOREGIN KEY(Shift_Code) REFERENCES Shift(Code);
ALTER TABLE Employee ADD CONSTRAINT FK1_Employee FOREIGN KEY(Super_Ssn) REFERENCES Employee(Ssn) ON DELETE CASCADE;
ALTER TABLE Employee ADD CONSTRAINT FK2_Employee FOREIGN KEY (Pharmacy_Code) REFERENCES Pharmacy(Code);

ALTER TABLE Medicine ADD CONSTRAINT FK0_Medicine FOREIGN KEY (Lab_Name) REFERENCES Laboratory(LName);
ALTER TABLE Medicine ADD CONSTRAINT FK1_Medicine FOREIGN KEY (Type_Excipient) REFERENCES Type_Excipient(Code);
ALTER TABLE Medicine ADD CONSTRAINT FK2_Medicine FOREIGN KEY (Type_Admin_Code) REFERENCES Type_Administration(Code);

ALTER TABLE Laboratory ADD CONSTRAINT FK0_Laboratory FOREIGN KEY(Phone_Code) REFERENCES Phone(Number);

